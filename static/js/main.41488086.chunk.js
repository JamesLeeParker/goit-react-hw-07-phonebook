(this["webpackJsonpgoit-react-hw-06-phonebook"]=this["webpackJsonpgoit-react-hw-06-phonebook"]||[]).push([[0],{16:function(t,e,n){t.exports={wrapper:"Phonebook_wrapper__3tcJy"}},31:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(7),o=n.n(a),i=n(2),s=n(5),u=n(4),l=n(13),b=n.n(l),d=n(15),j="https://61c49e84f1af4a0017d996d1.mockapi.io/api/v1/contacts",f=function(){var t=Object(d.a)(b.a.mark((function t(){var e,n,c=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:{},t.next=3,fetch(j);case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){return f(t)};h().then(console.log);var O=Object(u.b)("contacts/contacts_set"),p=Object(u.b)("contacts/contact_add"),m=Object(u.b)("contacts/contact_delete"),x=Object(u.b)("contacts/filter_change"),v=function(t){return function(e){console.log(t),function(t){var e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}};fetch(j,e)}(t),e(p(t))}},g=function(t){return function(e){!function(t){fetch("".concat(j,"/").concat(t),{method:"DELETE"})}(t),e(m(t))}},C=n(1);function y(){var t=Object(i.c)((function(t){return t.contacts.items})),e=Object(i.c)((function(t){return t.contacts.filter})),n=Object(i.b)(),c=function(t){var e=t.target.closest("li").getAttribute("id");return g(e)(n)};return function(){var n=e.toLowerCase();return t.filter((function(t){return console.log("\u2708\ufe0f ~ contact",t),t.name.toLowerCase().includes(n)}))}().map((function(t){var e=t.id,n=t.name,r=t.phone;return Object(C.jsxs)("li",{id:e,children:[Object(C.jsx)("span",{children:n}),": ",Object(C.jsx)("span",{children:r}),Object(C.jsx)("button",{type:"button",onClick:c,children:"delete"})]},e)}))}function w(t){var e=t.label,n=void 0===e?"":e,c=Object(i.b)();return Object(C.jsx)("div",{children:Object(C.jsxs)("label",{children:[n,Object(C.jsx)("input",{type:"text",onChange:function(t){c(x(t.target.value))}})]})})}var S=n(11);n(31);function k(){var t=Object(c.useState)(""),e=Object(s.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(""),o=Object(s.a)(a,2),u=o[0],l=o[1],b={id:Object(S.a)(),name:n,phone:u},d=Object(i.b)(),j=Object(i.c)((function(t){return t.contacts.items}));Object(c.useEffect)((function(){!function(t){h().then((function(e){return t(O(e))}))}(d)}),[]),Object(c.useEffect)((function(){!function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){return null}}("contacts",j)}),[b]);return Object(C.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),j.find((function(t){return t.name.toLowerCase()===b.name.toLowerCase()})))return alert("NO!");v(b)(d)},children:[Object(C.jsx)("h2",{children:"Name contact"}),Object(C.jsxs)("label",{children:[Object(C.jsx)("p",{children:"Name:"}),Object(C.jsx)("input",{onChange:function(t){return r(t.target.value)},type:"text",name:"name",value:n,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),Object(C.jsxs)("label",{children:[Object(C.jsx)("p",{children:"Phone number:"}),Object(C.jsx)("input",{onChange:function(t){return l(t.target.value)},type:"tel",name:"number",value:u,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),Object(C.jsx)("button",{children:"Add contact"})]})}var L=n(16),A=n.n(L),N=function(t){var e=t.contacts,n=t.delContact,c=t.addContact,r=t.filter,a=t.onFilterChange;return Object(C.jsxs)("div",{className:A.a.wrapper,children:[Object(C.jsx)("h1",{children:"Phonebook"}),Object(C.jsx)(k,{value:c}),Object(C.jsx)("h1",{children:"Contacts"}),Object(C.jsx)(w,{value:r,label:"Finde contact by name:",onFilterChange:a}),Object(C.jsx)("ul",{children:Object(C.jsx)(y,{contacts:e,delContact:n})})]})},_=function(){var t=Object(c.useState)([]),e=Object(s.a)(t,2),n=e[0],r=(e[1],Object(c.useState)("")),a=Object(s.a)(r,2),o=a[0],i=a[1];return Object(C.jsx)("div",{children:Object(C.jsx)(N,{contacts:function(){var t=o.toLowerCase();return n.filter((function(e){return e.name.toLowerCase().includes(t)}))}(),onFilterChange:function(t){i(t)}})})},E=n(17),F=n(9),J=n(18),P=n(3),T=Object(u.c)([],(function(t){t.addCase(O,(function(t,e){return e.payload})).addCase(p,(function(t,e){return[].concat(Object(J.a)(t),[e.payload])})).addCase(m,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))}))})),z=Object(u.c)("",Object(F.a)({},x,(function(t,e){return e.payload}))),Z=Object(P.b)({items:T,filter:z}),q=Object(E.createLogger)({collapsed:function(t,e,n){return!n.error}}),B=Object(u.a)({reducer:{contacts:Z},middleware:function(t){return t().concat(q)},devTools:!1});o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(i.a,{store:B,children:Object(C.jsx)(_,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.41488086.chunk.js.map